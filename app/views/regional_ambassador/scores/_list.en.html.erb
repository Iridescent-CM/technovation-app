<% if teams.any? %>
  <table class="ra-participants-list">
    <thead>
      <tr>
        <th>Team</th>
        <th>Submission</th>
        <th>Completed scores</th>
        <th>Pending scores</th>
        <th>Average of completed scores</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      <% teams.sort { |t1, t2|
        case params.fetch(:sort) { "avg_score_desc" }
        when "avg_score_desc"
          t2.submission.average_score <=> t1.submission.average_score
        when "avg_score_asc"
          t1.submission.average_score <=> t2.submission.average_score
        when "team_name"
          t1.name.downcase <=> t2.name.downcase
        end
      }.each do |team| %>
        <tr>
          <td><%= team.name %></td>
          <td><%= team.submission.app_name %></td>
          <td><%= team.submission_scores.complete.count %></td>
          <td><%= team.submission_scores.incomplete.count %></td>
          <td><%= team.submission.average_score %></td>
          <td><%= link_to 'View details',
            send("#{scope}_score_path", team.submission) %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>
    No teams were found for the <strong><%= division %></strong> division of the event: <strong><%= event.name %></strong>.
  </p>
<% end %>
